(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{53:function(e,t){},78:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),r=a(26),s=a.n(r),i=a(10),o=a.n(i),u=a(12),l=a(3);function j(e,t,a){var c=e;return"C"===t&&"F"===a?c=Math.round(1.8*e+32):"F"===t&&"C"===a&&(c=Math.round(.5556*(e-32))),c}function d(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function m(){return(m=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={enableHighAccuracy:!0,timeout:5e3,maximumAge:0},e.abrupt("return",new Promise((function(e,a){navigator.permissions.query({name:"geolocation"}).then((function(c){if("granted"===c.state||"prompt"===c.state)navigator.geolocation.getCurrentPosition((function(t){e(t)}),(function(e){a(e)}),t);else if("denied"===c.state)return!1}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=a(6),b=a.n(h),p=a(27),f=a.n(p),O=(a(78),a(0)),x=function(e){var t=Object(c.useState)(""),a=Object(l.a)(t,2),n=a[0],r=a[1];return Object(O.jsx)("section",{className:"row",children:Object(O.jsxs)("form",{id:"search-form",className:"search-form",onSubmit:function(t){t.preventDefault(),e.onSearch(n)},children:[Object(O.jsx)("label",{htmlFor:"search",className:"visually-hidden",children:"Search for a city"}),Object(O.jsx)("input",{id:"search",type:"search",name:"search",placeholder:"Search for a city",onChange:function(e){r(e.target.value)}}),Object(O.jsxs)("button",{type:"submit",children:[Object(O.jsx)("span",{className:"visually-hidden",children:"Search"}),Object(O.jsx)("span",{className:"material-icons",children:"search"})]})]})})},_=(a(80),function(e){var t=function(){return Object(O.jsxs)("h1",{className:"title row",children:["Today in ",Object(O.jsx)("strong",{id:"city-name",children:e.city})]})};return Object(O.jsx)(c.Fragment,{children:e.city?Object(O.jsx)(t,{}):null})}),g=(a(81),function(e){var t=Object(c.useState)(e.degrees),a=Object(l.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)(e.units),i=Object(l.a)(s,2),o=i[0],u=i[1];function d(){var t="C";"C"===o&&(t="F");var a=j(n,o,t);r(a),u(t),e.onUnitUpdate(t)}var m=function(){return Object(O.jsxs)("a",{className:"temperature temperature--".concat(e.size),onClick:d,children:[Object(O.jsxs)("span",{className:"temperature__amount","data-temp-amount":n,children:[n,"\xb0"]}),!0===e.showUnits&&Object(O.jsx)("span",{className:"temperature__units","data-temp-units":o,children:o})]})},h=function(){return Object(O.jsxs)("span",{className:"temperature temperature--".concat(e.size),children:[Object(O.jsxs)("span",{className:"temperature__amount","data-temp-amount":n,children:[n,"\xb0"]}),!0===e.showUnits&&Object(O.jsx)("span",{className:"temperature__units","data-temp-units":o,children:o})]})};return Object(O.jsx)(c.Fragment,{children:e.clickable?Object(O.jsx)(m,{}):Object(O.jsx)(h,{})})}),v=(a(82),function(e){return Object(O.jsxs)("ul",{className:"details",children:[Object(O.jsx)("li",{className:"details__item",children:Object(O.jsx)("span",{className:"details__item__description",children:e.description})}),Object(O.jsxs)("li",{className:"details__item",children:["Humidity: ",Object(O.jsx)("span",{className:"details__humidity",children:e.humidity}),"%"]}),Object(O.jsxs)("li",{className:"details__item",children:["Wind: ",Object(O.jsx)("span",{className:"details__wind",children:e.wind}),"km/h"]})]})}),w=(a(83),function(e){var t=Object(c.useState)(e.temperature),a=Object(l.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)(e.units),i=Object(l.a)(s,2),o=i[0],u=i[1];function d(t){u(t),e.onUnitUpdate(t)}Object(c.useEffect)((function(){u(e.units)}),[e.units]),Object(c.useEffect)((function(){r("F"===o?j(e.temperature,"C","F"):e.temperature)}),[e.temperature,o]);var m=function(){if(e.weather)return Object(O.jsx)("section",{className:"today row",children:Object(O.jsxs)("div",{className:"today__text",children:[Object(O.jsxs)("div",{className:"today__text__temperature",children:[Object(O.jsx)("div",{className:"today__text__temperature__image-wrap",children:Object(O.jsx)("img",{src:"http://openweathermap.org/img/wn/".concat(e.weather.weather[0].icon,"@2x.png"),alt:e.weather.weather[0].description})}),Object(O.jsx)(g,{size:"large",degrees:n,units:o,showUnits:!0,clickable:!0,onUnitUpdate:d})]}),Object(O.jsx)(v,{description:e.weather.weather[0].description,humidity:e.weather.main.humidity,wind:e.weather.wind.speed})]})})};return Object(O.jsx)(c.Fragment,{children:e.weather?Object(O.jsx)(m,{}):null})}),y=(a(84),function(e){var t="f4f65838c4d2f2b467cb557338c7cc7c",a=Object(c.useState)({}),n=Object(l.a)(a,2),r=n[0],s=n[1],i=Object(c.useState)("C"),o=Object(l.a)(i,2),u=o[0],d=o[1];function m(e){d(e)}!function(){var a=Object(c.useRef)(!1);Object(c.useEffect)((function(){a.current?(e.coords&&function(e){var a="https://api.openweathermap.org/data/2.5/onecall?lat=".concat(e.lat,"&lon=").concat(e.lon,"&appid=").concat(t,"&units=metric&exclude=current,hourly,minutely,alerts");b.a.get(a).then((function(e){var t=e.data.daily;t=t.slice(1,6);var a={};t.map((function(e,t){var c=(new Date).getTimezoneOffset(),n=e.dt,r=function(e){var t="";switch(e){case 0:t="Sun";break;case 1:t="Mon";break;case 2:t="Tue";break;case 3:t="Wed";break;case 4:t="Thu";break;case 5:t="Fri";break;case 6:t="Sat"}return t}(new Date(1e3*n+60*c*1e3).getDay()),s=Math.round(e.temp.min),i=Math.round(e.temp.max);a[r]={C:{min:s,max:i},F:{min:j(s,"C","F"),max:j(i,"C","F")},imageUrl:"http://openweathermap.org/img/wn/".concat(e.weather[0].icon,"@2x.png")}})),s(a)})).catch((function(e){console.log(e)}))}(e.coords),d(e.units)):a.current=!0}),[e.coords])}(),Object(c.useEffect)((function(){d(e.units)}),[e.units]);var h=function(){return Object(O.jsx)("section",{className:"forecast row",children:Object.keys(r).map((function(e){return Object(O.jsxs)("div",{className:"forecast__item",children:[Object(O.jsx)("span",{className:"forecast__item__day",children:e}),Object(O.jsx)("img",{className:"forecast__item__image",src:r[e].imageUrl,alt:""}),Object(O.jsxs)("span",{className:"forecast__item__min",children:["Low",Object(O.jsx)(g,{size:"small",degrees:r[e][u].min,units:u,showUnits:!1,clickable:!1,onUnitUpdate:m})]}),Object(O.jsxs)("span",{className:"forecast__item__max",children:["High",Object(O.jsx)(g,{size:"small",degrees:r[e][u].max,units:u,showUnits:!1,clickable:!1,onUnitUpdate:m})]})]},e)}))})};return Object(O.jsx)(c.Fragment,{children:r?Object(O.jsx)(h,{}):null})}),N=(a(85),function(e){var t=Object(c.useState)(null),a=Object(l.a)(t,2),n=a[0],r=a[1];!function(){var t=Object(c.useRef)(!1);Object(c.useEffect)((function(){t.current?e.coords&&function(e){var t="https://api.ipgeolocation.io/timezone?apiKey=ff944d6f7e6449e4804af70e245bbabd&lat=".concat(e.lat,"&long=").concat(e.lon);b.a.get(t).then((function(e){var t=JSON.parse(e.request.response),a=t.time_12.split(/[: ]/),c="+".concat(t.timezone_offset);t.timezone_offset<0&&(c=t.timezone_offset);var n={day:t.date_time_txt.split(",")[0],hours:a[0],minutes:a[1],meridiem:a[3],zoneName:t.timezone.replace("_"," "),zoneUTC:c};r(n)})).catch((function(e){console.log(e)}))}(e.coords):t.current=!0}),[e.coords])}();var s=function(){if(n)return Object(O.jsxs)("section",{className:"datetime row",children:[Object(O.jsxs)("span",{className:"datetime__time",children:[Object(O.jsx)("span",{className:"material-icons-outlined",children:"alarm"}),n.day," ",n.hours,":",n.minutes," ",n.meridiem]}),Object(O.jsxs)("span",{className:"datetime__zone",children:[n.zoneName," (GMT",n.zoneUTC,")"]})]})};return Object(O.jsx)(c.Fragment,{children:n?Object(O.jsx)(s,{}):null})}),S=a(28),k=a.n(S),U=(a(86),function(e){var t=new Date(e.data.publishedAt);return Object(O.jsx)("article",{className:"article",children:Object(O.jsxs)("a",{className:"article__inner",href:e.data.url,target:"_blank",rel:"noreferrer",children:[Object(O.jsx)("h2",{className:"article__inner__title",children:e.data.title}),Object(O.jsxs)("p",{className:"article__inner__source",children:[Object(O.jsxs)("span",{children:[t.getDate()," ",["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]]}),Object(O.jsx)("span",{children:e.data.source.name})]}),Object(O.jsx)("div",{className:"article__inner__copy",children:Object(O.jsx)("p",{children:k()(e.data.description,80)})})]})})}),F=(a(87),function(e){return Object(O.jsx)("div",{className:"alert alert--".concat(e.type),children:Object(O.jsx)("p",{children:e.message})})}),C=function(e){var t=Object(c.useRef)(!1),a=Object(c.useState)([]),n=Object(l.a)(a,2),r=n[0],s=n[1];Object(c.useEffect)((function(){t.current?function(e,t){var a="b4824ef81779b5b36a81816125585feb",c="https://gnews.io/api/v4/search?q=".concat(e,"&country=").concat(t,"&lang=en&token=").concat(a);b.a.get(c).then((function(e){var t=e.data.articles;s(t.slice(0,3))})).catch((function(e){console.log(e),s([])}))}(e.city,e.country):t.current=!0}),[e.city]);var i=function(){return Object(O.jsx)("aside",{id:"news",children:r.map((function(e,t){return Object(O.jsx)(U,{data:e},t)}))})};return Object(O.jsxs)(c.Fragment,{children:[r?Object(O.jsx)(i,{}):null,!r&&t.current?Object(O.jsx)(F,{type:"error",message:"There was a problem fetching news."}):null]})};a(88),a(89),a(90);function z(){var e="f4f65838c4d2f2b467cb557338c7cc7c",t=Object(c.useState)(null),a=Object(l.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)(""),i=Object(l.a)(s,2),j=i[0],h=i[1],p=Object(c.useState)(""),g=Object(l.a)(p,2),v=g[0],S=(g[1],Object(c.useState)(null)),k=Object(l.a)(S,2),U=k[0],F=k[1],z=Object(c.useState)(""),M=Object(l.a)(z,2),T=M[0],A=M[1],D=Object(c.useState)(0),E=Object(l.a)(D,2),q=E[0],J=E[1],R=Object(c.useState)("C"),H=Object(l.a)(R,2),P=H[0],I=H[1],W=Object(c.useState)(""),B=Object(l.a)(W,2),G=B[0],K=B[1];function L(t){var a=null;(a="object"===typeof t?"https://api.openweathermap.org/data/2.5/weather?lat=".concat(t.lat,"&lon=").concat(t.lon,"&appid=").concat(e,"&units=metric"):"https://api.openweathermap.org/data/2.5/weather?q=".concat(t,"&appid=").concat(e,"&units=metric"))&&b.a.get(a).then((function(e){r(e.data);var t=Math.round(e.data.main.temp);J(t),h(e.data.name),U||F(e.data.coord)})).catch((function(e){console.log(e),alert("Sorry, couldn't find that city. Please try again")}))}function Q(){return(Q=Object(u.a)(o.a.mark((function e(t){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://commons.wikimedia.org/w/api.php?action=query&prop=images&imlimit=500&redirects=1&titles=".concat(t,"&origin=*&format=json"),c="",e.abrupt("return",b.a.get(a).then((function(e){var a=e.data.query.pages,n=Object.entries(a)[0][1].images;if(n){var r=n[d(0,n.length)].title.replace("File:","").replace(/ /g,"_"),s=f.a.MD5(r).toString();c="https://upload.wikimedia.org/wikipedia/commons/".concat(s.charAt(0),"/").concat(s.charAt(0)).concat(s.charAt(1),"/").concat(r)}else console.log("No image found for ".concat(t));return c})).catch((function(e){console.log(e)})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(){var e=Object(c.useRef)(!1);Object(c.useEffect)((function(){e.current?(function(e){return Q.apply(this,arguments)}(j).then((function(e){K(e)})),A(q<=15?"cold":q>15&&q<25?"fair":q>=25&&q<35?"warm":"hot")):(function(){return m.apply(this,arguments)}().then((function(e){!function(e){L(e),I("C")}({lat:e.coords.latitude,lon:e.coords.longitude})})).catch((function(e){alert("There was a problem getting your location, please search instead"),console.log(e)})),e.current=!0)}),[j,U])}(),Object(O.jsx)("div",{className:"wrapper","data-temp-range":T,style:{backgroundImage:"url(".concat(G,")")},children:Object(O.jsxs)("main",{className:"app",children:[Object(O.jsx)("div",{className:"app__top",children:Object(O.jsx)(x,{onSearch:function(e){F(null),L(e),I("C")}})}),Object(O.jsxs)("div",{className:"app__main",children:[Object(O.jsx)(_,{city:j}),Object(O.jsx)(N,{coords:U}),Object(O.jsx)(w,{weather:n,temperature:q,units:P,onUnitUpdate:function(e){I(e)}}),Object(O.jsx)(y,{coords:U,units:P})]}),Object(O.jsx)("div",{className:"app__side",children:Object(O.jsx)(C,{country:v,city:j})})]})})}var M=document.getElementById("root");s.a.render(Object(O.jsx)(n.a.StrictMode,{children:Object(O.jsx)(z,{})}),M)}},[[91,1,2]]]);
//# sourceMappingURL=main.bc15137c.chunk.js.map